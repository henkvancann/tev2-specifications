"use strict";(self.webpackChunktev2_specifications=self.webpackChunktev2_specifications||[]).push([[4026],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>u});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),d=p(n),u=r,h=d["".concat(l,".").concat(u)]||d[u]||c[u]||a;return n?o.createElement(h,i(i({ref:t},m),{},{components:n})):o.createElement(h,i({ref:t},m))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<a;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7862:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>p});var o=n(3117),r=(n(7294),n(3905));const a={},i="Deployment",s={unversionedId:"spec-tools/tool-docs/mrg-import/deployment",id:"spec-tools/tool-docs/mrg-import/deployment",title:"Deployment",description:"MRG Import Example",source:"@site/docs/spec-tools/tool-docs/mrg-import/3-deployment.md",sourceDirName:"spec-tools/tool-docs/mrg-import",slug:"/spec-tools/tool-docs/mrg-import/deployment",permalink:"/tev2-specifications/docs/spec-tools/tool-docs/mrg-import/deployment",draft:!1,editUrl:"https://github.com/tno-terminology-design/tev2-specifications/blob/master/docs/spec-tools/tool-docs/mrg-import/3-deployment.md",tags:[],version:"current",lastUpdatedBy:"Rieks",lastUpdatedAt:1702049334,formattedLastUpdatedAt:"Dec 8, 2023",sidebarPosition:3,frontMatter:{},sidebar:"tev2SideBar",previous:{title:"Usage",permalink:"/tev2-specifications/docs/spec-tools/tool-docs/mrg-import/usage"},next:{title:"Error Reporting",permalink:"/tev2-specifications/docs/spec-tools/tool-docs/mrg-import/error-reporting"}},l={},p=[{value:"MRG Import Example",id:"mrg-import-example",level:2},{value:"Executed Steps",id:"executed-steps",level:3}],m={toc:p};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"deployment"},"Deployment"),(0,r.kt)("h2",{id:"mrg-import-example"},"MRG Import Example"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"@"},"MRG Import Tool")," is designed to be usable in both a command-line interface and a CI/CD pipeline. Features like the ",(0,r.kt)("a",{parentName:"p",href:"usage#configuration-file"},"configuration file"),", make the execution of the tool easily maintainable, and ",(0,r.kt)("a",{parentName:"p",href:"error-reporting"},"error reporting")," is available to assist further in importing ",(0,r.kt)("a",{parentName:"p",href:"@"},"MRG"),"s."),(0,r.kt)("p",null,"The GitHub repository of the ",(0,r.kt)("a",{parentName:"p",href:"@"},"MRG Import Tool"),", located ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/tno-terminology-design/mrg-import"},"here"),", acts as an example of the tool's deployment. Within the ",(0,r.kt)("inlineCode",{parentName:"p"},".github/workflows/docs-deploy.yml")," GitHub Actions Workflow file are the following lines of code. This code is located and run in the deploy job before the website is built, modifying the input files in runtime before they are used to build the Docusaurus site."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yml"},"    # Terminology reference resolution\n    - name: Install MRG Import Tool\n      run: npm install -g @tno-terminology-design/mrg-import\n    - name: Run MRG Import Tool\n      run: mrg-import --scopedir __tests__/content --onNotExist warn\n")),(0,r.kt)("p",null,"This execution of the ",(0,r.kt)("a",{parentName:"p",href:"@"},"MRG Import Tool")," is run from the root of the repository. The tool reads the ",(0,r.kt)("inlineCode",{parentName:"p"},"saf.yaml")," inside the supplied ",(0,r.kt)("inlineCode",{parentName:"p"},"scopedir")," (",(0,r.kt)("inlineCode",{parentName:"p"},"__tests__/content"),"). After which, the ",(0,r.kt)("inlineCode",{parentName:"p"},"scopes")," section of the local ",(0,r.kt)("a",{parentName:"p",href:"@"},"SAF")," is used to find the ",(0,r.kt)("inlineCode",{parentName:"p"},"scopedir")," of external scopes."),(0,r.kt)("h3",{id:"executed-steps"},"Executed Steps"),(0,r.kt)("p",null,"The following steps have been executed to reach a working implementation of the tool based on the ",(0,r.kt)("a",{parentName:"p",href:"#example-deployment"},"example deployment")," above. Multiple approaches are possible, like using ",(0,r.kt)("inlineCode",{parentName:"p"},"wget")," instead of ",(0,r.kt)("inlineCode",{parentName:"p"},"curl"),", or ",(0,r.kt)("inlineCode",{parentName:"p"},"yarn")," instead of ",(0,r.kt)("inlineCode",{parentName:"p"},"npm"),", but these have not been documented."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Make sure the ",(0,r.kt)("a",{parentName:"strong",href:"installation#prerequisites"},"prerequisites")," are met.")," ",(0,r.kt)("br",null),"\nPlease refer to ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nvm-sh/nvm"},"nvm")," installation and usage for the latest details about these commands."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# Download and install nvm\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.4/install.sh | bash\n# Download and install node.js\nnvm install node # "node" is an alias for the latest version\nnvm use node # Use the installed node.js version\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Install the latest version of the ",(0,r.kt)("a",{parentName:"strong",href:"@"},"MRG Import Tool")," and its dependencies globally.")," ",(0,r.kt)("br",null),"\nThis makes the ",(0,r.kt)("a",{parentName:"p",href:"@"},"MRG Import Tool")," CLI command available all throughout your system and does not initialize the current working directory with ",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com"},"npm")," files."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install -g @tno-terminology-design/mrg-import\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Configure the ",(0,r.kt)("a",{parentName:"strong",href:"@"},"SAF")," and make sure the necessary ",(0,r.kt)("a",{parentName:"strong",href:"@"},"MRG"),"'s are attainable.")," ",(0,r.kt)("br",null),"\nOur example deployment ",(0,r.kt)("inlineCode",{parentName:"p"},"saf.yaml")," can be viewed ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/tno-terminology-design/mrg-import/blob/main/__tests__/content/saf.yaml"},"here")," within the ",(0,r.kt)("inlineCode",{parentName:"p"},"__tests__/content")," directory.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Setup the ",(0,r.kt)("a",{parentName:"strong",href:"@"},"MRG Import Tool")," behavior per ",(0,r.kt)("a",{parentName:"strong",href:"usage#configuration-file"},"configuration file")," and/or command-line parameters.")," ",(0,r.kt)("br",null),"\nSee the ",(0,r.kt)("a",{parentName:"p",href:"#example-deployment"},"example deployment")," above for the yaml configuration file that is used. In this case we will be executing the ",(0,r.kt)("a",{parentName:"p",href:"@"},"MRG Import Tool")," from the root of our repository and not the root of the ",(0,r.kt)("a",{parentName:"p",href:"@"},"scopedir"),". This means you may have to change working directory before executing step 5.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Execute the ",(0,r.kt)("a",{parentName:"strong",href:"@"},"MRG Import Tool"),".")," ",(0,r.kt)("br",null),"\nWe will use the following command to run the tool according to the ",(0,r.kt)("inlineCode",{parentName:"p"},"__tests__/content/config.yaml")," config file. The configured paths are relative to the working directory where the ",(0,r.kt)("a",{parentName:"p",href:"@"},"MRG Import Tool")," is executed."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mrg-import --config __tests__/content/config.yaml --force\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Verify execution.")," ",(0,r.kt)("br",null),"\nThe ",(0,r.kt)("a",{parentName:"p",href:"@"},"MRG Import Tool")," CLI outputs information about its execution to the console according to the ",(0,r.kt)("a",{parentName:"p",href:"error-reporting"},"Error Reporting")," messages. The output should provide enough information to resolve issues surrounding the execution of the tool and the related terminology design. In this case, obtaining the second ",(0,r.kt)("a",{parentName:"p",href:"@"},"MRG")," listed in the import ",(0,r.kt)("a",{parentName:"p",href:"@"},"SAF")," resulted in an error that caused the tool to halt execution as specified by the ",(0,r.kt)("inlineCode",{parentName:"p"},"onNotExist")," option."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-n/a",metastring:'title="Sample console output"',title:'"Sample',console:!0,'output"':!0},"INFO    Found 1 import scope(s) in scopedir './__tests__/content'\nINFO      - Handling import scope 'essiflab'\nINFO      - Requesting 'https://raw.githubusercontent.com/tno-terminology-design/trrt/main/__tests__/content/saf.yaml'\nINFO    Found 2 maintained MRG file(s) in import scope 'essiflab'\nINFO      - Requesting 'https://raw.githubusercontent.com/tno-terminology-design/trrt/main/__tests__/content/terminology/mrg.default.main.yaml'\nINFO        - Storing MRG file 'mrg.essiflab.main.yaml' in '__tests__/content/terminology'\nINFO        - Creating symbolic link for 1 alternative version(s)\nINFO      - Requesting 'https://raw.githubusercontent.com/tno-terminology-design/trrt/main/__tests__/content/terminology/mrg.default.lain.yaml'\nERROR       - Request failed with status code 404, halting execution as requested by the 'onNotExist' throw option\n")))))}c.isMDXComponent=!0}}]);